<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Introduction to Perfect Clear Theory</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="head.html">Introduction to Perfect Clear Theory</a></li><li class="chapter-item expanded affix "><a href="foreword.html">Foreword</a></li><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="ch00-beforestart.html">Before Starting</a></li><li class="chapter-item expanded "><a href="ch01-typicalpc/main.html"><strong aria-hidden="true">1.</strong> The Typical Perfect Clear (PC)</a></li><li class="chapter-item expanded "><a href="ch02-countpc/main.html"><strong aria-hidden="true">2.</strong> Counting PCs</a></li><li class="chapter-item expanded "><a href="ch03-parity/main.html"><strong aria-hidden="true">3.</strong> Parity</a></li><li class="chapter-item expanded "><a href="ch04-piece-dependency/main.html"><strong aria-hidden="true">4.</strong> Piece dependency</a></li><li class="chapter-item expanded "><a href="ch05-intro-setup/main.html"><strong aria-hidden="true">5.</strong> Introduction to setups</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="end.html">What's next?</a></li><li class="chapter-item expanded affix "><a href="credit.html">Credits</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Introduction to Perfect Clear Theory</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p align="center"> <img src="./head.png"> </p>
<h1 id="introduction-to-perfect-clear-theory"><a class="header" href="#introduction-to-perfect-clear-theory">Introduction to Perfect Clear Theory</a></h1>
<p>Last updated 2021/11/18<br />
LLY</p>
<p>Source: <a href="https://docs.google.com/document/d/1udtq235q2SdoFYwMZNu-GRYR-4dCYMkp0E8_Hw1XTyg/edit?usp=sharing">https://docs.google.com/document/d/1udtq235q2SdoFYwMZNu-GRYR-4dCYMkp0E8_Hw1XTyg/edit?usp=sharing</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="foreword"><a class="header" href="#foreword">Foreword</a></h1>
<p>In modern Guideline Tetris, the art of Perfect Clearing is a relatively niche one. A technique where one clears the field with no residue remaining, akin to the initial state of the game, Perfect Clears (PCs) are difficult to come upon in fast-paced games, even more so when hindered by an opponent. Despite being worth about half a board of sent lines in guideline versus, PCs’ main debut are at the starts of games, where the field is still sterile; any PCs that appear in the midgame are generally attributed to luck.</p>
<p>Furthermore, PCs require more study to reliably execute than simpler opening setups, and without much varying effect; the property of sent lines to also function as ammo for the opponent may backfire for a PC. As such, PCs in versus are said to be unreliable at best, and optional at worst, with many players focusing on midgame and other aspects to improve their play.</p>
<p>Single-player modes provide more chances for PCs to shine. In score-based gameplay PCs often score a large amount; under optimal conditions PCs are more efficient score-wise in relation to other methods. The lack of a harassing opponent allows a smart player to leave the board clean under their own terms. A fairly large portion of scores achieved on the leaderboards are done so with some form of Perfect Clearing.</p>
<p>The true art of Perfect Clearing, however, known as Pure PCs, or Consecutive PCs, is rarer than its hybrid counterparts. What is more commonly seen in the leaderboards often consists of T-spins as an augment, or have T-spins as the main scoring tool with PCs acting as a reset of the board. These techniques sidestep the hardest parts of Perfect Clearing. Yet they prosper, for speed is also a factor; it is easier to perform a simpler technique fast to compensate a drop in efficiency. To that effect, even within those hybrid techniques, a mind for efficiency is not required to excel as long as speed compensates.</p>
<p>Separate from those leaderboards is an enclave. PC Mode, a gamemode where only consecutive PCs are allowed, is the main endeavour and motivation of those interested in Consecutive PCs. In this mode, speed is not important, as virtually the only factor is the number of PCs done in a row; though gravity is doubled to reduce excessive stalling. Efficiency shines here, with research and study geared towards the increase of theoretical and practical success chances, unbounded by most mechanical constraints. Those who top the leaderboard are the ones with knowledge and situational awareness, alongside honed PC vision and stamina to consistently apply it.</p>
<p>The art of Consecutive Perfect Clearing has come a long way since the early days of Tetris. The path of research has been a mountain, with players and researchers of the previous Tetris generations paving the way for many others to reach further. As of writing, there is one player far above the rest on the leaderboard, simply known as hummus, with well over 200 PCs in a row. Players may be close to the point where an actual PC mode run will surpass 300 consecutive PCs, a sequence once worked over as a collaborative study by Shuey and QuestionMark, as an exhibition towards the plausible chances that consecutive PCs were possible for essentially forever, if you knew the pieces that came next.</p>
<p>Research on Consecutive PCs is likely the closest to the theory of Tetris in comparison to other game modes. Due to the lack of opposing players and mechanical requirements, PC mode plays most like a puzzle game as opposed to other modes. Research on the properties and differences of pieces in relation to each other and the field is important to understand why some placements work better. Particularly due to the theoretical aspect of consecutive PC research itself, the ideas and theories are often intimately related to the core of tetromino stacking.</p>
<p>Consecutive PC research will eventually propagate and influence theory on other Tetris game modes and methods. The findings may be applicable to stacking in general, or form a base idea to further research other modes on. Tetris has not been fully solved, and is unlikely to be as more modes and ideas turn up. Thus research shall advance according to those constraints, and further understanding will be obtained.
Should the ideas connect, so progress is nurtured.</p>
<p>STICKMANCOMIC <br />
2021/06/05</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="preface"><a class="header" href="#preface">Preface</a></h1>
<p>This publication is intended for learners of perfect clearing, aspiring perfect clear theorists, as well as Tetris players with a mind for exploring theoretical perfect clear concepts. Emphasis is not placed on practical techniques such as setups but on the tools we have developed to analyze the field and the piece queue in conjunction with modern Tetris mechanics such as holding.</p>
<p>The writer hopes this will help publicise perfect clear theory and establish a standard for the nomenclature and jargon that is used within the lively community JimothyJimothy founded that is PC Gang to which I was invited by Windcatcher.</p>
<p>LLY <br />
2021/06/04</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="before-starting"><a class="header" href="#before-starting">Before Starting</a></h1>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Familiarity with fundamental mechanics of modern Tetris is expected. Knowledge of basic modular arithmetic is beneficial. Although appreciation of the theory requires only a logical mindset, mastery of the SRS rotation system is recommended for practical solving.</p>
<h2 id="notation-for-piece-queues"><a class="header" href="#notation-for-piece-queues">Notation for piece queues</a></h2>
<p>The notation described is consistent with that used by knewjade’s sfinder.</p>
<p><em>“Tetrominos”</em> (used interchangeably with <em>“pieces”</em>) are any of <code>T</code>, <code>I</code>, <code>L</code>, <code>J</code>, <code>S</code>, <code>Z</code>, and <code>O</code>.</p>
<p>Sets of tetrominos are denoted by a sequence of tetrominos enclosed by a pair of square brackets. Square brackets followed by <code>pN</code> where <code>N</code> is a natural number denotes drawing <code>N</code> pieces randomly from the set enclosed by the square brackets without replacement. Square brackets without the following <code>pN</code> is shorthand for <code>p1</code>.</p>
<p>An asterisk (*) is shorthand for <code>[TILJSZO]</code>.</p>
<p>A valid piece queue is composed of single tetrominos and square bracket clauses that may be separated by commas (,) for clarity.</p>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<ol>
<li><code>ILSZ</code> or equivalently <code>I,L,S,Z</code> specifies one distinct queue of four pieces.</li>
<li><code>[ILSZ]p4</code> specifies 24 distinct queues of four pieces.</li>
<li><code>T,*p7</code> specifies 5040 distinct queues of eight pieces.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-typical-perfect-clear-pc"><a class="header" href="#the-typical-perfect-clear-pc">The Typical Perfect Clear (PC)</a></h1>
<p>All ensuing discussion assumes the following conditions:</p>
<h2 id="uses-the-7-bag-randomiser"><a class="header" href="#uses-the-7-bag-randomiser">Uses the 7-bag randomiser</a></h2>
<p align="center"> <img src="ch01-typicalpc/./7bag.png"> </p>
<p>With this mode of random piece generation, pieces are generated in <em>“bags”</em> of seven. Each bag includes all seven distinct pieces (<code>T</code>, <code>I</code>, <code>L</code>, <code>J</code>, <code>S</code>, <code>Z</code>, <code>O</code>) in random order. This is important for us since it grants a certain degree of predictability by periodically ensuring the appearance of all pieces. The term <em>“bag”</em> usually refers exclusively to a 7-bag.</p>
<p>PC runs/Tetris games that generate pieces completely randomly (i.e. the following piece is always independent of the current piece) are known as <em>“memoryless”</em>.</p>
<h2 id="four-line-4l-by-default"><a class="header" href="#four-line-4l-by-default">Four line (4L) by default</a></h2>
<p>This is a practical constraint. Assuming single-player gameplay as in PC mode or no garbage is received otherwise, multiples of two lines must be cleared starting from an empty board to achieve a PC. However, as two line (2L) PCs are only rarely possible and may sometimes even be undesirable, PCs are typically done by clearing in multiples of four lines, which is conventionally the maximum number of cleared lines that is permitted by the next completed PC before a consecutive PC run is halted. There exist advanced PC setups such as DPC setups and PC endings to popular openers such as Gamushiro Stacking that exceed four lines, but these are out of the scope of our discussion and can be analysed using the same methods as regular consecutive PCs which will be our main concern. For our purposes, the field beyond the bottom four rows is irrelevant.</p>
<h2 id="utilises-hold"><a class="header" href="#utilises-hold">Utilises hold</a></h2>
<p>The hold mechanism allows enormous flexibility in rearranging piece order and allows us to consider an additional piece: the first piece from the next PC can be swapped with any piece from the current PC. This can cause the next PC to start with a piece that has a duplicate piece in the rest of the bag. The hold piece or the immediate next piece if there is none when the next PC begins is known as the <em>“saved”</em> piece or <em>“save”</em>.</p>
<p align="center"> <img src="ch01-typicalpc/./hold.png"> </p>
<h2 id="checkpoint"><a class="header" href="#checkpoint">Checkpoint</a></h2>
<ol>
<li>State the next piece that will appear in the queue if the game has just started, your current piece is <code>I</code>, and the following pieces in the queue are <code>S</code>, <code>Z</code>, <code>O</code>, <code>L</code>, <code>T</code>.</li>
<li>Determine the total number of pieces used in seven 4L PCs.</li>
<li>The queue is <code>T,J,L</code>. List all possible orders in which these pieces can be placed.</li>
<li>Determine all possible saves if the queue is <code>T,J,L</code> and the field is the following:</li>
</ol>
<p align="center"> <img src="ch01-typicalpc/./exercise.png"> </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="counting-pcs"><a class="header" href="#counting-pcs">Counting PCs</a></h1>
<p>There is a loop every seven 4L PCs as exactly ten bags are used. As we will see, considering only the boundaries between bags, which define the character of each PC, the 1st PC is essentially identical to the 8th, the 2nd is to the 9th, and so forth for PCs seven apart. For this reason, PCs are conventionally specified by an ordinal number from 1st to 7th known simply as the “PC number”. Given this number, we can determine how much of the current bag has elapsed and expect the pieces available for the next PC to some extent.</p>
<p>Discussion of individual setups should always mention the PC number. Even though the same shape and constituent pieces may be reused as setups for different PCs, having a different piece distribution can sway PC chances.</p>
<p align="center"> <img src="ch02-countpc/./count.png" width="50%"> </p>
<p>For each row in the chart above, the rightmost cell indicates which PC, the numbers indicate how many pieces are used, and the dark lines between numbers mark boundaries between the distinctly coloured bags. The pieces used in a 2L PC precede the green line.</p>
<p>Observe how each PC is divided differently by the boundaries of the bags.</p>
<p align="center"> <img src="ch02-countpc/./2lpc.png" width="75%"> </p>
<p>While 4L PCs advance the PC number by one, 2L PCs advance the PC number by four (e.g. after completing a 3rd PC with a 2L solution, the next PC is equivalent to the 7th PC). Although keeping count of PCs would suffice, mathematically, the PC number when the field is empty is given by the formula:</p>
<p>\[ \left[ \left( \text{number of pieces used in complete PCs} \times 5 \right) \mod{7} \right] + 1 \]</p>
<h3 id="sidenote-on-the-70-piece-loop"><a class="header" href="#sidenote-on-the-70-piece-loop">Sidenote on the 70-piece loop</a></h3>
<p>The attentive or experienced reader may have noticed that a loop may not strictly be sustained in the case the player does not use all seven pieces in the second bag during the 7th PC and instead uses a piece from the following bag that belongs to the 1st PC. This scenario is known as a <em>“duplicate piece”</em> 1st PC or informally the “8th” PC.</p>
<p>Known 7th PC setups often use the remaining three pieces from the first bag and are designed in mind to only use the seven pieces from the second bag, bypassing such concerns. However, as duplicate piece 1st setups that utilise said saves are being investigated, it may sometimes be favourable to forgo completion of the 70-piece loop.</p>
<h2 id="checkpoint-1"><a class="header" href="#checkpoint-1">Checkpoint</a></h2>
<ol>
<li>Determine the current PC number if the field is now empty, 14 PCs have been completed, four of which were 2L PCs and the rest 4L PCs.</li>
</ol>
<h2 id="exercises"><a class="header" href="#exercises">Exercises</a></h2>
<ol>
<li>Explain why openers that use exactly five bags and have a high chance of finishing with a PC (e.g. BT Cannon) can be a viable loop while those that do not but also have a high chance of finishing with a PC (e.g. Gamushiro Stacking uses 20 pieces) cannot be looped on its own.</li>
<li>Explain why any single variant of tetromino could be missing from the entire piece queue (with holding considered) during the 4th and 6th PCs.</li>
<li>In which PC(s) is/are a 2L PC with 2 <code>I</code> pieces and 3 <code>O</code> pieces possible?</li>
<li>The field is currently empty. The hold piece is <code>T</code>, the current piece is <code>J</code>, and the visible queue shows the next five pieces <code>O,I,O,T,J</code>. What PC(s) could this be?</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parity"><a class="header" href="#parity">Parity</a></h1>
<p>Parity rules in the context of PC determine whether a PC is possible based only on the orientation and quantity of the given pieces. We will only discuss the most commonly known parity rules. The reader is encouraged to verify statements that are hereupon presented as fact.</p>
<h2 id="checkerboard-parity"><a class="header" href="#checkerboard-parity">Checkerboard parity</a></h2>
<p align="center"> <img src="ch03-parity/./check01.png"> </p>
<p>An empty 10x4 field is checkered as shown. For each PC, an equal amount of light cells and dark cells must be filled.</p>
<p><u>The checkerboard parity rule states that the number of <code>T</code> pieces and number of <em>“odd”</em> line clears together must sum to an even number for any PC.</u> An <em>“odd”</em> line clear is when the total number of empty cells above or below the cleared line is odd. All <em>“boxes”</em> (rectangular areas) with an even horizontal or vertical dimension must obey this rule.</p>
<p align="center"> <img src="ch03-parity/./check02.png"> </p>
<p>Of all the tetrominos, only the <code>T</code> piece changes checkerboard parity by filling two more cells of either colour than of the other.</p>
<p align="center"> <img src="ch03-parity/./check03.png"> <img src="ch03-parity/./check04.png"> </p>
<p>Notice how light cells become dark cells and vice versa when one line is cleared. On the left is an example of an <em>“odd”</em> line clear, and on the right is an example of an <em>“even”</em> line clear which does not affect checkerboard parity.</p>
<h2 id="column--vertical-parity"><a class="header" href="#column--vertical-parity">Column / vertical parity</a></h2>
<p align="center"> <img src="ch03-parity/./column01.png"> </p>
<p>An empty 10x4 field is shaded as shown. Again for this colouring, for each PC, an equal amount of light cells and dark cells must be filled. <code>L</code> piece, <code>J</code> piece, and <em>“vertical”</em> <code>T</code> piece placements change column parity. Column parity is not affected by line clears. For most purposes, vertical <code>I</code> piece placements are not considered.</p>
<p><u>The column parity rule states that the number of <code>L</code> pieces, <code>J</code> pieces, and <em>“vertical”</em> <code>T</code> pieces together must sum to an even number for any PC.</u> All boxes with an area that is multiple of four squares must obey this rule.</p>
<p align="center"> <img src="ch03-parity/./column02.png"> </p>
<p>A <code>T</code> piece is <em>“vertical”</em> if either rotated clockwise once or counterclockwise once from the original orientation and <em>“horizontal”</em> otherwise. The <code>T</code> piece on the far left is a <em>“vertical”</em> <code>T</code> piece and the <code>T</code> piece in the middle is a <em>“horizontal”</em> <code>T</code> piece. All <code>L</code> pieces and <code>J</code> pieces regardless of orientation and <em>“vertical”</em> <code>T</code> pieces affect column parity by filling two more cells of either colour than of the other.</p>
<h2 id="exercises-1"><a class="header" href="#exercises-1">Exercises</a></h2>
<ol>
<li>Determine the minimum total of <code>L</code>, <code>J</code>, and <code>T</code> pieces necessary to complete any box if at least one <code>S</code> or <code>Z</code> piece must be used.</li>
<li>Explain why it is impossible to PC a 6x4 box with queue <code>SZ,[ILSZO]p4</code>.</li>
<li>Determine whether it is possible to save <code>T</code> in 2nd PC with queue <code>[JSZO]p4,\*p7</code>.</li>
<li>Given a 4L PC solution exists with queue <code>ILSZSLIZJTO</code>, determine all possible orientations of the <code>T</code> piece and if it can be unused.</li>
<li>Capella uses 6-3 stacking and completes 1st PC with a Tetris as shown on the cover page. Determine whether it is possible to complete a 2nd 4L PC with a Tetris.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="piece-dependency"><a class="header" href="#piece-dependency">Piece dependency</a></h1>
<p>Piece dependencies in the context of PC refer to how specific pieces must be placed in certain places for a PC to occur due to the arrangement of existing filled cells. It is advisable to avoid dependencies unless the required pieces are expected to be present.</p>
<h2 id="field-division"><a class="header" href="#field-division">Field division</a></h2>
<p align="center"> <img src="ch04-piece-dependency/./01.png"> </p>
<p>The total number of empty cells in completely separate individual regions must be divisible by four for a PC to occur. If a field has separate regions that cannot be rejoined by line clearing and any of those separate regions have a total of empty cells that is indivisible by four, the field is impossible to PC in four lines.</p>
<h2 id="single-piece-dependencies"><a class="header" href="#single-piece-dependencies">Single piece dependencies</a></h2>
<p align="center"> <img src="ch04-piece-dependency/./02.png"> </p>
<p>In the above field, the solid cells are placed pieces whereas the shaded cells indicate dependencies. <code>T</code>, <code>I</code>, and <code>O</code> pieces are said to be <em>“fixed”</em> to their respective shaded regions. Notably, while the highlighted <code>T</code> dependency is connected to a larger empty region to the right, any piece that overlaps both would cause the resulting regions to each have a total of empty cells indivisible by four. The logic is similar for the <code>O</code> dependency.</p>
<p align="center"> <img src="ch04-piece-dependency/./03.png"> </p>
<p>Some dependencies are discernible by parity or by enumeration of all possibilities. Observe how a <code>T</code> dependency is present above.</p>
<h2 id="queue-dependent-piece-fixing"><a class="header" href="#queue-dependent-piece-fixing">Queue-dependent piece fixing</a></h2>
<p>In practice, taking into account the actual queue can help decide piece placements.</p>
<p align="center"> <img src="ch04-piece-dependency/./04.png"> </p>
<p>The grey cells comprise a residue following the TSD of a well-known DPC setup. The queue is <code>*p7</code> and a PC is 100% possible without considering the following bag. Placing the S piece as shown would fix the <code>L</code> piece which would then also fix the <code>I</code> piece as it becomes the only piece that can fill the one high space in the 6th and 7th columns from the left.</p>
<p>In actuality, the <code>I</code> piece can be placed regardless without jeopardising PC chances.</p>
<h3 id="sidenote"><a class="header" href="#sidenote">Sidenote</a></h3>
<p>A piece being fixed in a region does not imply it must occupy any single fixed cell in the region. The diagrams shown are a simplistic representation.</p>
<h2 id="exercises-2"><a class="header" href="#exercises-2">Exercises</a></h2>
<ol>
<li>Considering only the bottom four rows, determine whether the following is true:
<ul>
<li>Any piece that is at least three high must divide the board.</li>
</ul>
</li>
<li>Determine whether it is possible at all to PC the following field with any queue: <p align="center"> <img src="ch04-piece-dependency/./05.png"> </p></li>
<li>Identify all piece dependencies in the following field: <p align="center"> <img src="ch04-piece-dependency/./06.png"> </p></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction-to-setups"><a class="header" href="#introduction-to-setups">Introduction to setups</a></h1>
<p>Setups are shapes that usually involve the first few pieces in each PC and have been discovered to give good PC chances and saves. As a rule of thumb, good setups should be able to accommodate many piece combinations that could appear in the queue. Even when just freestyling, one should avoid creating irreconcilable dependencies.</p>
<p>Most setups use three to four pieces. It is possible to find solutions to three piece setups assuming visibility of five future pieces in the queue. If a solution cannot be found immediately, it is also possible to transition to known four piece setups. By the fourth piece placed, all pieces that can be used in the PC have already appeared in the queue, so it is advisable to avoid placing more pieces before finding a solution.</p>
<p>When referring to setups, the most reliable and precise way is to simply use fumen as many an effort to devise simple readable notations for setups has resulted in grim outcomes. Mirrored setups may not have the same success rate due to SRS <code>I</code>-spins, and horizontally translated setups may surprisingly have the same problem due to SRS wall kicks: the orientation and positioning of setups are not useless information. In the community, many shapes (not setups) are given curious short English names that can double as embarrassing relics. For instance, a vertical <code>T</code> alone instead of the entire opener can be recognised as the shape <em>“PCO”</em> despite what the abbreviation usually suggests.</p>
<p align="center"> <img src="ch05-intro-setup/./01.png"> <img src="ch05-intro-setup/./02.png"> </p>
<p>Above are 2nd PC setups for the queue <code>[JSZO]p4</code>. The setup on the left has a success rate of 80.00% and that on the right (the left half of which is known as <em>“feet”</em> or <em>“shoe”</em>) has a success rate of 94.21%. Notice how the worse setup fixes two pieces whereas the better setup is far more flexible. In a PC run, the setup on the right would either be used as is or as a three-piece setup by omitting the <code>O</code> or <code>Z</code> piece to increase chances, or even avoided altogether by saving other pieces because of its dissatisfactory chances and saves. The strategy may be different for two-minute Blitz / Ultra runs that emphasise score instead; even top players may sacrifice PC success rate for setups with more patent solutions in order to save thinking time.</p>
<p>In the process of studying setups, it is advantageous to be familiar with their solutions and possible continuations. The term <em>“minimals”</em> refers to any smallest set of solutions for a setup that encompasses all solvable queues. The size of the set can serve as a rough measure of the difficulty of solving the setup. Minimals are not always unique.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="whats-next"><a class="header" href="#whats-next">What's next?</a></h1>
<p>Serious PC practitioners should invest their time in studying setups for each PC as well as in solving them. Various resources exist:</p>
<ul>
<li>
<p>knewjade, one of the all-time greats, has penned a couple of <a href="https://gist.github.com/knewjade/2b8620cf81b7dd9ecc0e75a6084b536d">articles</a> regarding PC theory and devised a <a href="https://knewjade.github.io/tetris-knowledge/2pcsystem/index.html">system</a> for the first two PCs, among other influential achievements, most if not all of which can be found on <a href="https://github.com/knewjade">Github</a>. These are, however, in Japanese.</p>
</li>
<li>
<p>Eminent PC player Nilgiri maintains a list of 1st PC setups available <a href="https://drive.google.com/file/d/1sSrG3BpEr1UjtJ_c-W8XfPJDs41RLPUR/view?usp=sharing">here</a>.</p>
</li>
<li>
<p><a href="https://four.lol/">FOUR</a> by davdav1233 and cosin307, <a href="https://harddrop.com/wiki/Tetris_Wiki">Tetris Wiki</a> by Hard Drop community, <a href="https://tetrisopener.wicurio.com/">テトリス開幕テンプレ Wiki</a> (Japanese) by yuu, <a href="https://shiwehi.com/tetris/">テトリス堂</a> (Japanese) by shiwehi, and <a href="https://w.atwiki.jp/tetrismaps/">テトリステンプレ集</a> (Japanese) by biseki, seirei, and mipi, all provide a set of common openers and PC setups and should suffice for players of all skill levels.</p>
</li>
<li>
<p>Your humble writer himself actively maintains a list of setups with graphics, statistics, and Jstris practice modes available at <a href="https://tinyurl.com/perfectclearsetups">tinyurl.com/perfectclearsetups</a>.</p>
</li>
</ul>
<p>More casual players and budding PC enthusiasts may find themselves training the common opener PCO, for which <a href="https://davdav1233.github.io/ttpc/">this tool</a> (Japanese) by sakuramochi84 and davdav1233 may be useful.</p>
<p>If you are not interested in the actual action, PC research may be for you. We use PC finding software to investigate potential setups that can then be used in consecutive PC runs and multiplayer matches alike.</p>
<p>Finally, reap the rewards of your labour and challenge yourself to consecutive PCs at <a href="https://jstris.jezevec10.com/play/PC">Jstris</a> or <a href="https://kingofstackers.com/new_pcb.php">KoS</a>. The editorial wishes the readers the best of luck in their future PC endeavours.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="credits"><a class="header" href="#credits">Credits</a></h1>
<h2 id="editors"><a class="header" href="#editors">Editors</a></h2>
<p>stickmancomic <br />
Marfung37</p>
<h2 id="improvements-and-corrections"><a class="header" href="#improvements-and-corrections">Improvements and corrections</a></h2>
<p>AbsurdPotato <br />
torchlight</p>
<h2 id="exercise-inspirations"><a class="header" href="#exercise-inspirations">Exercise inspirations</a></h2>
<p><a href="https://twitter.com/4M9Oq_J5K27HLQ/status/1357262354841440257">Ogonek:Macron</a> <br />
<a href="https://discord.gg/HQ3aJM7TJw">PC Gang</a> (<a href="https://discord.com/channels/569728778985537585/689739087581544556/850045523934969896">hummus</a>, <a href="https://cdn.discordapp.com/attachments/689739087581544556/798489646479704064/unknown.png">smolfeesh</a>, <a href="https://cdn.discordapp.com/attachments/569730842319126541/842065110779559946/unknown.png">Speedphoenix</a>, <a href="https://discord.com/channels/@me/847857546768547890/847867552013352980">stickmancomic</a>)</p>
<h2 id="figures"><a class="header" href="#figures">Figures</a></h2>
<p><a href="https://github.com/knewjade/solution-finder">util fig (sfinder)</a> by knewjade, GUI by kitsune_fuchi</p>
<h2 id="special-thanks"><a class="header" href="#special-thanks">Special thanks</a></h2>
<p><a href="https://gist.github.com/knewjade/2b8620cf81b7dd9ecc0e75a6084b536d">knewjade</a>, PC Gang, and all who have come before.</p>
<h2 id="contact"><a class="header" href="#contact">Contact</a></h2>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>LLY</td><td>tkdlolly@gmail.com</td></tr>
<tr><td>stickmancomic</td><td>stickmancomic2002@gmail.com</td></tr>
<tr><td>Marfung37</td><td>Marfung37#8014 (Discord)</td></tr>
</tbody></table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
