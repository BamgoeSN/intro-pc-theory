<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Counting PCs - Introduction to Perfect Clear Theory</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../head.html">Introduction to Perfect Clear Theory</a></li><li class="chapter-item expanded affix "><a href="../foreword.html">Foreword</a></li><li class="chapter-item expanded affix "><a href="../preface.html">Preface</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../ch00-beforestart.html">Before Starting</a></li><li class="chapter-item expanded "><a href="../ch01-typicalpc/main.html"><strong aria-hidden="true">1.</strong> The Typical Perfect Clear (PC)</a></li><li class="chapter-item expanded "><a href="../ch02-countpc/main.html" class="active"><strong aria-hidden="true">2.</strong> Counting PCs</a></li><li class="chapter-item expanded "><a href="../ch03-parity/main.html"><strong aria-hidden="true">3.</strong> Parity</a></li><li class="chapter-item expanded "><a href="../ch04-piece-dependency/main.html"><strong aria-hidden="true">4.</strong> Piece dependency</a></li><li class="chapter-item expanded "><a href="../ch05-intro-setup/main.html"><strong aria-hidden="true">5.</strong> Introduction to setups</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../end.html">What's next?</a></li><li class="chapter-item expanded affix "><a href="../credit.html">Credits</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Introduction to Perfect Clear Theory</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="counting-pcs"><a class="header" href="#counting-pcs">Counting PCs</a></h1>
<p>There is a loop every seven 4L PCs as exactly ten bags are used. As we will see, considering only the boundaries between bags, which define the character of each PC, the 1st PC is essentially identical to the 8th, the 2nd is to the 9th, and so forth for PCs seven apart. For this reason, PCs are conventionally specified by an ordinal number from 1st to 7th known simply as the “PC number”. Given this number, we can determine how much of the current bag has elapsed and expect the pieces available for the next PC to some extent.</p>
<p>Discussion of individual setups should always mention the PC number. Even though the same shape and constituent pieces may be reused as setups for different PCs, having a different piece distribution can sway PC chances.</p>
<p align="center"> <img src="./count.png" width="50%"> </p>
<p>For each row in the chart above, the rightmost cell indicates which PC, the numbers indicate how many pieces are used, and the dark lines between numbers mark boundaries between the distinctly coloured bags. The pieces used in a 2L PC precede the green line.</p>
<p>Observe how each PC is divided differently by the boundaries of the bags.</p>
<p align="center"> <img src="./2lpc.png" width="75%"> </p>
<p>While 4L PCs advance the PC number by one, 2L PCs advance the PC number by four (e.g. after completing a 3rd PC with a 2L solution, the next PC is equivalent to the 7th PC). Although keeping count of PCs would suffice, mathematically, the PC number when the field is empty is given by the formula:</p>
<p>\[ \left[ \left( \text{number of pieces used in complete PCs} \times 5 \right) \mod{7} \right] + 1 \]</p>
<h3 id="sidenote-on-the-70-piece-loop"><a class="header" href="#sidenote-on-the-70-piece-loop">Sidenote on the 70-piece loop</a></h3>
<p>The attentive or experienced reader may have noticed that a loop may not strictly be sustained in the case the player does not use all seven pieces in the second bag during the 7th PC and instead uses a piece from the following bag that belongs to the 1st PC. This scenario is known as a <em>“duplicate piece”</em> 1st PC or informally the “8th” PC.</p>
<p>Known 7th PC setups often use the remaining three pieces from the first bag and are designed in mind to only use the seven pieces from the second bag, bypassing such concerns. However, as duplicate piece 1st setups that utilise said saves are being investigated, it may sometimes be favourable to forgo completion of the 70-piece loop.</p>
<h2 id="checkpoint"><a class="header" href="#checkpoint">Checkpoint</a></h2>
<ol>
<li>Determine the current PC number if the field is now empty, 14 PCs have been completed, four of which were 2L PCs and the rest 4L PCs.</li>
</ol>
<h2 id="exercises"><a class="header" href="#exercises">Exercises</a></h2>
<ol>
<li>Explain why openers that use exactly five bags and have a high chance of finishing with a PC (e.g. BT Cannon) can be a viable loop while those that do not but also have a high chance of finishing with a PC (e.g. Gamushiro Stacking uses 20 pieces) cannot be looped on its own.</li>
<li>Explain why any single variant of tetromino could be missing from the entire piece queue (with holding considered) during the 4th and 6th PCs.</li>
<li>In which PC(s) is/are a 2L PC with 2 <code>I</code> pieces and 3 <code>O</code> pieces possible?</li>
<li>The field is currently empty. The hold piece is <code>T</code>, the current piece is <code>J</code>, and the visible queue shows the next five pieces <code>O,I,O,T,J</code>. What PC(s) could this be?</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../ch01-typicalpc/main.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../ch03-parity/main.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../ch01-typicalpc/main.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../ch03-parity/main.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
